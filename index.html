<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gurbani - CTF Writeups</title>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&display=swap" rel="stylesheet">
    <!-- This library converts Markdown to HTML -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        /* Basic styles for the page */
        :root {
            --background: #1a1b26;
            --foreground: #a9b1d6;
            --green: #9ece6a;
            --cyan: #7dcfff;
            --yellow: #e0af68;
            --red: #f7768e;
            --blue: #7aa2f7;
            --magenta: #bb9af7;
            --comment: #565f89;
        }

        body {
            background-color: var(--background);
            color: var(--foreground);
            font-family: 'Fira Code', monospace;
            font-size: 16px;
            line-height: 1.5;
            margin: 0;
            padding: 1rem;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        /* The main terminal container */
        #terminal {
            width: 100%;
            max-width: 800px;
            height: 90vh;
            max-height: 600px;
            border: 1px solid var(--foreground);
            border-radius: 8px;
            overflow-y: auto;
            padding: 1rem;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }

        /* The output area for commands */
        #output {
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        /* The command input line */
        .input-line {
            display: flex;
            align-items: center;
        }

        /* The prompt before the input (e.g., user@host:~$ ) */
        .prompt {
            color: var(--green);
            margin-right: 0.5rem;
            white-space: nowrap;
        }

        /* The actual input field */
        #command-input {
            background: none;
            border: none;
            color: var(--foreground);
            font-family: inherit;
            font-size: inherit;
            flex-grow: 1;
            outline: none;
        }

        /* Blinking cursor effect */
        #command-input:focus {
            animation: blink 1s step-end infinite;
        }

        @keyframes blink {
            from, to { border-right: 2px solid var(--foreground); }
            50% { border-right: 2px solid transparent; }
        }

        /* Styling for links */
        a {
            color: var(--cyan);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        /* Specific colors for command outputs */
        .command-help .command { color: var(--blue); }
        .command-help .description { color: var(--foreground); }
        .command-projects .project-title { color: var(--yellow); }
        .command-socials .social-platform { color: var(--magenta); }
        
        /* Styling for the fetched writeup content */
        .writeup-content {
            border-left: 2px solid var(--comment);
            padding-left: 1rem;
            margin-top: 0.5rem;
        }
        .writeup-content h2 { color: var(--yellow); font-size: 1.1em; margin-top: 0; }
        .writeup-content h3 { color: var(--blue); font-size: 1em; }
        .writeup-content code { background-color: #24283b; padding: 0.2em 0.4em; border-radius: 4px; }
        .writeup-content p { margin: 0.5em 0; }
        .writeup-content img { max-width: 100%; border-radius: 4px; margin-top: 0.5em; }

        /* Style for the animation container */
        .animation-container {
            color: var(--red); /* Changed to red for a more aggressive hacker look */
        }

    </style>
</head>
<body>

    <div id="terminal">
        <div id="output"></div>
        <div class="input-line">
            <span class="prompt">gurbani@ctf-blog:~$</span>
            <input type="text" id="command-input" autofocus>
        </div>
    </div>

    <script>
        const terminal = document.getElementById('terminal');
        const output = document.getElementById('output');
        const input = document.getElementById('command-input');

        // --- COMMAND DEFINITIONS ---
        const commands = {
            'help': `
<div class="command-help">
  <span class="command">whoami</span>      -  Who am I?
  <span class="command">projects</span>    -  List available writeups.
  <span class="command">read [name]</span> -  Display a specific writeup (e.g., 'read get-ahead').
  <span class="command">socials</span>     -  Display my social media links.
  <span class="command">clear</span>       -  Clear the terminal screen.
  <span class="command">banner</span>      -  Display the welcome banner and animation.
</div>`,
            'whoami': `
<span style="color: var(--yellow);">Gurbani</span>
Cybersecurity enthusiast with a passion for Capture The Flag competitions.
This is a collection of my writeups and notes.
`,
            'projects': `
<div class="command-projects">
Available writeups. Use the 'read' command to view one.
Example: <span style="color: var(--cyan);">read get-ahead</span>

  <span class="project-title">get-ahead</span>        -  Category: Web Exploitation
  <span class="project-title">mod-26</span>           -  Category: Cryptography
  <span class="project-title">sleuthkit-intro</span>  -  Category: Forensics

... and many more to be added.
</div>
`,
            'socials': `
<div class="command-socials">
  <span class="social-platform">GitHub</span>      -  <a href="https://github.com/grbani" target="_blank">github.com/grbani</a>
  <span class="social-platform">LinkedIn</span>    -  <a href="https://www.linkedin.com/in/gurbani-kaur-b93b3a257/" target="_blank">linkedin.com/in/gurbani-kaur</a>
</div>
`,
            'bannerText': `
Welcome to my interactive terminal!
Type <span style="color: var(--cyan);">'help'</span> to see a list of available commands.
`
        };

        // --- HELPER FUNCTION TO SAFELY ADD CONTENT ---
        function appendContent(htmlString) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = htmlString;
            while (tempDiv.firstChild) {
                output.appendChild(tempDiv.firstChild);
            }
        }

        // --- SKULL ANIMATION FUNCTION ---
        function runAnimation() {
            const skullArt =[
                              "       _____",
                              "    .-'     '-.",
                              "   /           \\",
                              "  |  .--. .--.  |",
                              "  | (    Y    ) |",
  "  (  '--' '--'  )",
  "   \\_        _/",
  "     | || || |",
  "    _| || || |_",
  "   (___|_|_|___)",
  "    /   | |   \\",
  "   (_.__| |__._)",
  "     /__|_|__\\"
];


            const animationContainer = document.createElement('pre');
            animationContainer.className = 'animation-container';
            output.appendChild(animationContainer);

            let lineIndex = 0;

            return new Promise(resolve => {
                const interval = setInterval(() => {
                    if (lineIndex < skullArt.length) {
                        animationContainer.textContent += skullArt[lineIndex] + '\n';
                        lineIndex++;
                    } else {
                        clearInterval(interval);
                        resolve(); // Signal that the animation is complete
                    }
                }, 100); // 100ms delay between each line
            });
        }

        async function showBanner() {
            await runAnimation(); // Wait for the animation to finish
            appendContent(commands.bannerText); // Then add the text
            terminal.scrollTop = terminal.scrollHeight;
        }

        // --- MAIN COMMAND HANDLER ---
        input.addEventListener('keydown', async function(e) {
            if (e.key === 'Enter') {
                const fullCommand = input.value.trim();
                const [command, arg] = fullCommand.toLowerCase().split(/\s+/);
                
                appendContent(`\n<div class="input-line"><span class="prompt">gurbani@ctf-blog:~$</span><span>${fullCommand}</span></div>`);

                if (command === 'clear') {
                    output.innerHTML = '';
                } else if (command === 'banner') {
                    await showBanner();
                } else if (command === 'read') {
                    if (arg) {
                        try {
                            const response = await fetch(`writeups/${arg}.md`);
                            if (response.ok) {
                                const markdownText = await response.text();
                                const htmlContent = marked.parse(markdownText);
                                appendContent(`<div class="writeup-content">${htmlContent}</div>`);
                            } else {
                                throw new Error('Writeup not found');
                            }
                        } catch (error) {
                            appendContent(`<span style="color: var(--red);">Error: Writeup '${arg}' not found. Type 'projects' to see a list.</span>`);
                        }
                    } else {
                        appendContent(`<span style="color: var(--red);">Usage: read [project-name]</span>`);
                    }
                } else if (commands[command]) {
                    appendContent(commands[command]);
                } else if (command === '') {
                    // Do nothing for empty command
                } else {
                    appendContent(`<span style="color: var(--red);">Command not found: ${command}. Type 'help' for a list of commands.</span>`);
                }

                input.value = '';
                terminal.scrollTop = terminal.scrollHeight;
            }
        });

        terminal.addEventListener('click', () => input.focus());
        
        // Initial load
        showBanner();
    </script>

</body>
</html>
